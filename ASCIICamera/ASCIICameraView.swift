//
//  ASCIICameraView.swift
//  ASCIICamera
//
//  Created by Jacopo Gasparetto on 07/03/22.
//

import SwiftUI

struct ASCIICameraView: View {
    @ObservedObject var cameraOutput: CameraOutput
    let densities = [
        "=======--------:::::::::........                  ",
        "=========--------:::::::::........                ",
        "++=========--------:::::::::........              ",
        "++++========---------:::::::::........            ",
        "++++++========---------:::::::::........          ",
        "++++++++=========--------:::::::::........        ",
        "*+++++++++=========--------:::::::::........      ",
        "***+++++++++=========--------:::::::::........    ",
        "******++++++++=========--------:::::::::........  ",
        "********++++++++=========--------:::::::::........",
        "#*********++++++++=========--------:::::::::......",
        "###*********++++++++=========--------:::::::::....",
        "#####********+++++++++=========--------:::::::::..",
        "#######********+++++++++=========--------:::::::::",
        "#########*********++++++++=========--------:::::::",
        "%%#########********+++++++++========---------:::::",
        "%%%%#########********+++++++++=========--------:::",
        "%%%%%%#########********+++++++++=========--------:",
        "%%%%%%%%#########*********++++++++========--------",
        "@@%%%%%%%%#########********+++++++++========------",
        "@@@@%%%%%%%%#########*********++++++++========----",
        "@@@@@@%%%%%%%%#########********+++++++++=========-",
        "@@@@@@@@%%%%%%%%#########********+++++++++========",
        "@@@@@@@@@@%%%%%%%%#########*********++++++++======",
        "@@@@@@@@@@@@%%%%%%%%#########********+++++++++===="
    ]
    
    @State private var selectedDensity = "%%#########********+++++++++========---------:::::"
    
    var body: some View {
        VStack{
            Form {
                Section {
                    Picker("Density", selection: $selectedDensity) {
                        ForEach(densities, id: \.self) {
                            Text($0)
                        }
                    }
                }
            }.padding(8)
            Text(cameraOutput.text)
                .font(.system(size: 14, design: .monospaced))
                .frame(width: 840, height: 800, alignment: .center)
                ._lineHeightMultiple(0.5)
                .onChange(of: selectedDensity, perform: { newValue in
                    cameraOutput.density = Array(newValue)
                })
        }
    }
}
